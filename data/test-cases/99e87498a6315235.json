{"uid":"99e87498a6315235","name":"test_apply_coupon_to_new_order[apply_free_coupon]","fullName":"tests.backend.coupons.test_apply_coupons#test_apply_coupon_to_new_order","historyId":"73133e2a06b733ae6aa29c56b6870b2e","time":{"start":1758150201950,"stop":1758150203507,"duration":1557},"description":"Test applying a coupon to a newly created order.\n\nThis test:\n1. Creates a new order for a random or fixed product.\n2. Retrieves or creates a coupon depending on the discount type.\n3. Applies the coupon to the order via API.\n4. Verifies that the order total and discount are correct.\n5. Checks that the customer is listed as having used the coupon.\n\nArgs:\n    apply_coupon_setup (dict): Fixture providing setup info and helpers.\n    discount_type (str): Type of coupon to apply (percent, fixed_cart, fixed_product, free_coupon).\n\nAsserts:\n    - Order total before and after applying coupon.\n    - Discount applied matches expected.\n    - Coupon is valid and published.\n    - Customer is correctly listed as a coupon user.\n","descriptionHtml":"<p>Test applying a coupon to a newly created order.</p>\n<p>This test:</p>\n<ol>\n<li>Creates a new order for a random or fixed product.</li>\n<li>Retrieves or creates a coupon depending on the discount type.</li>\n<li>Applies the coupon to the order via API.</li>\n<li>Verifies that the order total and discount are correct.</li>\n<li>Checks that the customer is listed as having used the coupon.</li>\n</ol>\n<p>Args:<br />\napply_coupon_setup (dict): Fixture providing setup info and helpers.<br />\ndiscount_type (str): Type of coupon to apply (percent, fixed_cart, fixed_product, free_coupon).</p>\n<p>Asserts:<br />\n- Order total before and after applying coupon.<br />\n- Discount applied matches expected.<br />\n- Coupon is valid and published.<br />\n- Customer is correctly listed as a coupon user.</p>\n","status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"apply_coupon_setup","time":{"start":1758150196058,"stop":1758150196470,"duration":412},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Test applying a coupon to a newly created order.\n\nThis test:\n1. Creates a new order for a random or fixed product.\n2. Retrieves or creates a coupon depending on the discount type.\n3. Applies the coupon to the order via API.\n4. Verifies that the order total and discount are correct.\n5. Checks that the customer is listed as having used the coupon.\n\nArgs:\n    apply_coupon_setup (dict): Fixture providing setup info and helpers.\n    discount_type (str): Type of coupon to apply (percent, fixed_cart, fixed_product, free_coupon).\n\nAsserts:\n    - Order total before and after applying coupon.\n    - Discount applied matches expected.\n    - Coupon is valid and published.\n    - Customer is correctly listed as a coupon user.\n","status":"passed","steps":[],"attachments":[{"uid":"eafdd8ff170441f6","name":"log","source":"eafdd8ff170441f6.txt","type":"text/plain","size":9078}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"apply_coupon_setup::0","time":{"start":1758150205477,"stop":1758150206530,"duration":1053},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"smoke"},{"name":"tag","value":"ebe11"},{"name":"tag","value":"applycoupon"},{"name":"parentSuite","value":"tests.backend.coupons"},{"name":"suite","value":"test_apply_coupons"},{"name":"host","value":"runnervmf4ws1"},{"name":"thread","value":"2086-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.backend.coupons.test_apply_coupons"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"discount_type","value":"'free_coupon'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"tags":["ebe11","smoke","applycoupon"]},"source":"99e87498a6315235.json","parameterValues":["'free_coupon'"]}