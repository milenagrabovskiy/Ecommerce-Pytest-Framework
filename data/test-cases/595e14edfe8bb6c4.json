{"uid":"595e14edfe8bb6c4","name":"test_create_order[reg_user_5_ord_5_prod]","fullName":"tests.backend.orders.test_create_order_smoke#test_create_order","historyId":"30eba2beedc8f98aa4d345c12fa2d8a5","time":{"start":1758093763709,"stop":1758093763709,"duration":0},"description":"Verify that orders can be created and retrieved via the WooCommerce API.\n\nThis test covers multiple scenarios using parameterization:\n    - Guest user creating 1 order with 1 item.\n    - Guest user creating 1 order with multiple items.\n    - Guest user creating multiple orders with 1 item each.\n    - Registered user creating 1 order with multiple items.\n    - Registered user creating multiple orders with 1 item each.\n    - Registered user creating multiple orders with multiple items each.\n\nFor each scenario, asserts the following:\n    - API response is not empty.\n    - Order ID is an integer.\n    - Customer ID matches expected value (0 for guest, or the correct customer ID).\n    - Order key format starts with 'wc_order_'.\n    - Newly created order can be retrieved via API and exists in the database.\n\nArgs:\n    my_orders_smoke_setup (dict): Fixture providing product info, API helpers, and order tracking.\n    user_type (str): Type of user creating the order, either \"guest_user\" or \"registered_user\".\n    order_qty (int): Quantity of orders created via API.\n    product_qty (int): Quantity of products in 'line_items' in payload to create order via API.\n","descriptionHtml":"<p>Verify that orders can be created and retrieved via the WooCommerce API.</p>\n<p>This test covers multiple scenarios using parameterization:<br />\n- Guest user creating 1 order with 1 item.<br />\n- Guest user creating 1 order with multiple items.<br />\n- Guest user creating multiple orders with 1 item each.<br />\n- Registered user creating 1 order with multiple items.<br />\n- Registered user creating multiple orders with 1 item each.<br />\n- Registered user creating multiple orders with multiple items each.</p>\n<p>For each scenario, asserts the following:<br />\n- API response is not empty.<br />\n- Order ID is an integer.<br />\n- Customer ID matches expected value (0 for guest, or the correct customer ID).<br />\n- Order key format starts with 'wc_order_'.<br />\n- Newly created order can be retrieved via API and exists in the database.</p>\n<p>Args:<br />\nmy_orders_smoke_setup (dict): Fixture providing product info, API helpers, and order tracking.<br />\nuser_type (str): Type of user creating the order, either &quot;guest_user&quot; or &quot;registered_user&quot;.<br />\norder_qty (int): Quantity of orders created via API.<br />\nproduct_qty (int): Quantity of products in 'line_items' in payload to create order via API.</p>\n","status":"broken","statusMessage":"RuntimeError: 'cryptography' package is required for sha256_password or caching_sha2_password auth methods","statusTrace":"@pytest.fixture(scope=\"module\")\n    def my_orders_smoke_setup():\n        \"\"\"Setup fixture for creating and cleaning up test orders.\n    \n        Fetches a random product from the database and prepares API helpers.\n        Tracks created orders for teardown after tests complete.\n    \n        Yields:\n            dict: {\n                \"product_id\" (int): Random product ID from DB,\n                \"product_price\" (float): Product price,\n                \"orders_api_helper\" (OrdersAPIHelper): Helper for order API calls,\n                \"order_ids\" (list[int]): Tracks created order IDs for teardown\n            }\n        \"\"\"\n        products_dao = ProductsDAO()\n        product_api_helper = ProductsAPIHelper()\n>       random_product = products_dao.get_random_product_from_db(qty=1)[0]\n\ntests/backend/orders/test_create_order_smoke.py:34: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nsrc/dao/products_dao.py:40: in get_random_product_from_db\n    rs_sql = self.db_helper.execute_select(sql)\nsrc/utilities/dbUtility.py:31: in execute_select\n    conn = self.create_connection()\nsrc/utilities/dbUtility.py:23: in create_connection\n    connection = pymysql.connect(host=self.host, user=self.creds['db_user'],\n/opt/hostedtoolcache/Python/3.13.7/x64/lib/python3.13/site-packages/pymysql/connections.py:361: in __init__\n    self.connect()\n/opt/hostedtoolcache/Python/3.13.7/x64/lib/python3.13/site-packages/pymysql/connections.py:669: in connect\n    self._request_authentication()\n/opt/hostedtoolcache/Python/3.13.7/x64/lib/python3.13/site-packages/pymysql/connections.py:979: in _request_authentication\n    auth_packet = _auth.caching_sha2_password_auth(self, auth_packet)\n/opt/hostedtoolcache/Python/3.13.7/x64/lib/python3.13/site-packages/pymysql/_auth.py:267: in caching_sha2_password_auth\n    data = sha2_rsa_encrypt(conn.password, conn.salt, conn.server_public_key)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\npassword = b'SpecialStudentsSecret', salt = b'^phP9(~/Twb>DeV*\\nnYm'\npublic_key = b'-----BEGIN PUBLIC KEY-----\\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAmE7rN2b1SK+cHlbBJuhy\\n7WnyqChNyu7BrMutBWtlMO...EozxYH9BW+KJ23\\nvx4a0Hrs6Ui6XNKiYmsK9l/PwEwYt3phoWR0RAh27OM12+mxaNwalSUs0uosqNFr\\nNwIDAQAB\\n-----END PUBLIC KEY-----\\n'\n\n    def sha2_rsa_encrypt(password, salt, public_key):\n        \"\"\"Encrypt password with salt and public_key.\n    \n        Used for sha256_password and caching_sha2_password.\n        \"\"\"\n        if not _have_cryptography:\n>           raise RuntimeError(\n                \"'cryptography' package is required for sha256_password or\"\n                + \" caching_sha2_password auth methods\"\n            )\nE           RuntimeError: 'cryptography' package is required for sha256_password or caching_sha2_password auth methods\n\n/opt/hostedtoolcache/Python/3.13.7/x64/lib/python3.13/site-packages/pymysql/_auth.py:144: RuntimeError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"my_orders_smoke_setup","time":{"start":1758093763214,"stop":1758093763510,"duration":296},"status":"broken","statusMessage":"RuntimeError: 'cryptography' package is required for sha256_password or caching_sha2_password auth methods\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.13.7/x64/lib/python3.13/site-packages/pluggy/_callers.py\", line 38, in run_old_style_hookwrapper\n    res = yield\n          ^^^^^\n  File \"/opt/hostedtoolcache/Python/3.13.7/x64/lib/python3.13/site-packages/pluggy/_callers.py\", line 139, in _multicall\n    teardown.throw(exception)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.13.7/x64/lib/python3.13/site-packages/_pytest/setuponly.py\", line 36, in pytest_fixture_setup\n    return (yield)\n            ^^^^^\n  File \"/opt/hostedtoolcache/Python/3.13.7/x64/lib/python3.13/site-packages/pluggy/_callers.py\", line 121, in _multicall\n    res = hook_impl.function(*args)\n  File \"/opt/hostedtoolcache/Python/3.13.7/x64/lib/python3.13/site-packages/_pytest/fixtures.py\", line 1140, in pytest_fixture_setup\n    result = call_fixture_func(fixturefunc, request, kwargs)\n  File \"/opt/hostedtoolcache/Python/3.13.7/x64/lib/python3.13/site-packages/_pytest/fixtures.py\", line 891, in call_fixture_func\n    fixture_result = next(generator)\n  File \"/home/runner/work/Ecommerce-Pytest-Framework/Ecommerce-Pytest-Framework/demostore_automation/tests/backend/orders/test_create_order_smoke.py\", line 34, in my_orders_smoke_setup\n    random_product = products_dao.get_random_product_from_db(qty=1)[0]\n                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^\n  File \"/home/runner/work/Ecommerce-Pytest-Framework/Ecommerce-Pytest-Framework/demostore_automation/src/dao/products_dao.py\", line 40, in get_random_product_from_db\n    rs_sql = self.db_helper.execute_select(sql)\n  File \"/home/runner/work/Ecommerce-Pytest-Framework/Ecommerce-Pytest-Framework/demostore_automation/src/utilities/dbUtility.py\", line 31, in execute_select\n    conn = self.create_connection()\n  File \"/home/runner/work/Ecommerce-Pytest-Framework/Ecommerce-Pytest-Framework/demostore_automation/src/utilities/dbUtility.py\", line 23, in create_connection\n    connection = pymysql.connect(host=self.host, user=self.creds['db_user'],\n                                 password=self.creds['db_password'],\n                                 port=self.port)\n  File \"/opt/hostedtoolcache/Python/3.13.7/x64/lib/python3.13/site-packages/pymysql/connections.py\", line 361, in __init__\n    self.connect()\n    ~~~~~~~~~~~~^^\n  File \"/opt/hostedtoolcache/Python/3.13.7/x64/lib/python3.13/site-packages/pymysql/connections.py\", line 669, in connect\n    self._request_authentication()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/opt/hostedtoolcache/Python/3.13.7/x64/lib/python3.13/site-packages/pymysql/connections.py\", line 979, in _request_authentication\n    auth_packet = _auth.caching_sha2_password_auth(self, auth_packet)\n  File \"/opt/hostedtoolcache/Python/3.13.7/x64/lib/python3.13/site-packages/pymysql/_auth.py\", line 267, in caching_sha2_password_auth\n    data = sha2_rsa_encrypt(conn.password, conn.salt, conn.server_public_key)\n  File \"/opt/hostedtoolcache/Python/3.13.7/x64/lib/python3.13/site-packages/pymysql/_auth.py\", line 144, in sha2_rsa_encrypt\n    raise RuntimeError(\n    ...<2 lines>...\n    )\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"afterStages":[],"labels":[{"name":"tag","value":"orders"},{"name":"tag","value":"ecomorders2"},{"name":"parentSuite","value":"tests.backend.orders"},{"name":"suite","value":"test_create_order_smoke"},{"name":"host","value":"runnervmf4ws1"},{"name":"thread","value":"2082-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.backend.orders.test_create_order_smoke"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"order_qty","value":"5"},{"name":"product_qty","value":"5"},{"name":"user_type","value":"'registered_user'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"tags":["orders","ecomorders2"]},"source":"595e14edfe8bb6c4.json","parameterValues":["5","5","'registered_user'"]}